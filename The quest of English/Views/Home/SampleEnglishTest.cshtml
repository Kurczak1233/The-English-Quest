@model The_quest_of_English.Models.ViewModels.AnswearsAndQuestionsList
@using The_quest_of_English.Models.ViewModels
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - The_quest_of_English</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" asp-append-version="true" />
    <link href="~/css/site.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css" asp-append-version="true">
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

</head>
<body class="mb-0">
    <partial name="NavigationBar" />

    <main id="main">
        <section class="container">
            <div class="row">
                <div class="col-xl-8 col-12">
                    <div class="row">
                        <div class="col-12 mt-5 text-center">
                            <p class="font-size-big dark-blue-text-color">Test your English!</p>
                            <p class="font-size-rather-small">
                                Here you are able to check how well do you know extraordinery rules in English.
                                This is not like an ordinary placement test. You will attempt some tricky, intriguing or interesting questions, so do not worry if you do not know them!
                            </p>

                        </div>
                    </div>
                    <hr id="firstSection" />
                    <div data-bs-spy="scroll" data-bs-target="#NavigationList" data-bs-offset="0" class="scrollspy-example " tabindex="0">
                        <section id="grammarSection">
                            <div class="row justify-content-center">
                                <div class="indent-blue mt-3" id="startScrolling"></div>
                                <div class="col-12 dark-blue-text-color text-center font-size-big">
                                    Grammar
                                </div>
                            </div>
                            @await Html.PartialAsync("QuestionAndAnswearPartial", new AnswearsAndQuestionsList { Answears = Model.Answears.Take(5) , SampleTestQAViewModels = @Model.SampleTestQAViewModels.Take(5)});
                        <div class="text-center mt-5 mb-5">
                            <button id="checkAnswearsGrammar" type="submit" class="btn warm-orange-color">Check answears</button>
                        </div>
                        </section>
                        <hr id="secondSection" />
                        <section id="readingSection">
                            <div class="row justify-content-center">
                                <div class="indent-blue mt-3"></div>
                                <div class="col-12 dark-blue-text-color  text-center font-size-big">
                                    Reading
                                </div>
                            </div>
                            @await Html.PartialAsync("QuestionAndAnswearPartial", new AnswearsAndQuestionsList { Answears = Model.Answears.Skip(5).Take(5), SampleTestQAViewModels = @Model.SampleTestQAViewModels.Skip(5).Take(5) });
                        <div class="text-center mt-5 mb-5">
                            <button id="checkAnswearsReading" type="submit" class="btn warm-orange-color">Check answears</button>
                        </div>
                        </section>
                        <hr id="thirdsection" />
                        <section id="writingSection">
                            <div class="row justify-content-center">
                                <div class="indent-blue mt-3"></div>
                                <div class="col-12 dark-blue-text-color  text-center font-size-big">
                                    Writing
                                </div>
                            </div>
                            @await Html.PartialAsync("QuestionAndAnswearPartial", new AnswearsAndQuestionsList { Answears = Model.Answears.Skip(10).Take(5), SampleTestQAViewModels = @Model.SampleTestQAViewModels.Skip(10).Take(5) });
                        <div class="text-center mt-5 mb-5">
                            <button id="checkAnswearsWriting" onclick="CheckAnswears" type="submit" class="btn warm-orange-color">Check answears</button>
                        </div>
                        </section>
                        <hr id="lastSectionn" />
                    </div>
                    <div class="row">
                        <div class="col-12 text-center font-size-medium mt-5 mb-5">
                            <p>You have just looked at some tricky questions, which were quite difficult. If you would like attempt some more of this, just sign in to the platform!</p>
                            <a asp-controller="Home" asp-action="Index" class="btn btn-info" aria-label="button" type="button">Back to main page</a>
                        </div>
                    </div>
                </div>
                <aside id="aside" class="col-4 d-none d-xl-block mt-5">
                    <div id="NavigationList" class="list-group">
                        <div class="indent-blue"></div>
                        <span class="font-size-rather-small mb-3 font-weight-bold dark-blue-text-color">Test sections:</span>
                        <div id="SpecialBorderG" class="border-left-style mb-3">
                            <a id="GrammarNavCollapse" class="list-group-item list-group-item-action border-0 font-size-medium" role="button" aria-expanded="false" aria-controls="grammar" href="#grammarSection">
                                Grammar
                            </a>
                            <div class="collapse text-right font-size-rather-small" id="grammar">
                                <div class="col-12 card card-body border-0 text-left">
                                    <p>Grammar is considered the hardest part of English language. Whenever you meet an idiom or a phrasal verb you may feel confused!</p>
                                    <p class="font-weight-bold">Tips:</p>
                                    <p>Read the whole sentence several times. Grammar rules tend to be detemined by many words and dependencies. Sometimes the context may be helpful.</p>
                                </div>
                            </div>
                        </div>
                        <div id="SpecialBorderR" class="border-left-style mb-3">
                            <a id="ReadingNavCollapse" class="list-group-item list-group-item-action border-0 font-size-medium" role="button" aria-expanded="false" aria-controls="reading" href="#readingSection">
                                Reading
                            </a>
                            <div class="collapse text-right font-size-rather-small" id="reading">
                                <div class="col-12 card card-body border-0 text-left">
                                    <p>Reading part test your general English understanding.</p>
                                    <p class="font-weight-bold">Tips:</p>
                                    <p>Read the whole sentence several times. Focus on the whole structure rather than single words.</p>
                                </div>
                            </div>
                        </div>
                        <div id="SpecialBorderW" class="border-left-style mb-3">
                            <a id="WritingNavCollapse" class="list-group-item list-group-item-action border-0 font-size-medium" role="button" aria-expanded="false" aria-controls="writing" href="#writingSection">
                                Writing
                            </a>
                            <div class="collapse text-right font-size-rather-small" id="writing">
                                <div class="col-12 card card-body border-0 text-left">
                                    <p>Writing tests your usage of English. It is considered to be rather tricky when it comes to higher English levels. It is highly beneficial if learned mindfully.</p>
                                    <p class="font-weight-bold">Tips:</p>
                                    <p>Look out on spelling mistakes. Some words have multiple meanings. Finding the right one depends on your knowledge.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </section>
    </main>

    <partial name="FooterBar" />
    <script src="~/lib/jquery/dist/jquery.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.js" asp-append-version="true"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
</body>
</html>
<script>
    //Navbar dynamics
    $(document).ready(function () {
        var navbar = $("#navbar");
        navbar.css("background-color", "rgb(66, 239, 245)");
        navbar.css("transition", "all 1s");
    });
    //Interactive menu dynamics
    function CloseCollapse(ObjId, ToggleId) {
        $(ToggleId).addClass("collapse");
        $(ObjId).css("border-left", "5px solid rgb(30, 32, 166)");
        $(ObjId).css("transition", "all 0.3s");
    }

    function OpenCollapse(ObjId, ToggleId) {
        $(ToggleId).removeClass("collapse");
        $(ObjId).css("border-left", "5px solid rgb(252, 186, 3)");
        $(ObjId).css("transition", "all 0.3s");
    }

    var start = $('#startScrolling').offset().top - 50;
    $(document).scroll(function () {
        var windowTopOffset = $(window).scrollTop();
        var lastSectiontopOffset = $('#secondSection').offset().top + 400;
        var secondSectiontopOffset = $('#secondSection').offset().top - 400;
        if (windowTopOffset >= start && windowTopOffset <= secondSectiontopOffset) {
            OpenCollapse('#SpecialBorderG', '#grammar');
            CloseCollapse('#SpecialBorderR', '#reading');
            CloseCollapse('#SpecialBorderW', '#writing');
        }
        else if (windowTopOffset > secondSectiontopOffset && windowTopOffset < lastSectiontopOffset) {
            CloseCollapse('#SpecialBorderG', '#grammar');
            OpenCollapse('#SpecialBorderR', '#reading');
            CloseCollapse('#SpecialBorderW', '#writing');
        }
        else if (windowTopOffset > lastSectiontopOffset) {
            CloseCollapse('#SpecialBorderR', '#reading');
            OpenCollapse('#SpecialBorderW', '#writing');
            CloseCollapse('#SpecialBorderG', '#grammar');
        }

    });

    //Navbar slides down
    var navListOffset = $('#grammarSection').offset().top - $('#main').offset().top - 66;
    $('#NavigationList').css("margin-top", navListOffset)
    $(document).scroll(function () {
        var lastSectiontopOffset = $('#thirdsection').offset().top + 160;
        var windowTopOffset = $(window).scrollTop();
        var $el = $('#NavigationList');
        if (windowTopOffset > start && windowTopOffset <= lastSectiontopOffset) {
            $('#NavigationList').css("margin-top", windowTopOffset - 80);
        }
        else if (windowTopOffset > lastSectiontopOffset) {
            $('#NavigationList').css("margin-top", lastSectiontopOffset);
        }
    });
    //Checking answears
    var ar = @Html.Raw(Json.Serialize(Model.Answears));
    console.log(ar);

    function CheckAnswears(string) {
        var counter = 0;
        $(string).one("click", function () {
            console.log($('#checkAnswears'));
            $('[id = "checkAnswears"]').each(function () {
                var elId = $(this).find("input[type=radio]:checked").attr('id');
                var radioLabelValue = $("label[for='" + elId + "']").text();
                var trimStr = $.trim(radioLabelValue);
                var trimStr2 = $.trim(ar[counter]);
                console.log(trimStr2);
                console.log(trimStr);
                console.log(elId);
                if (trimStr2 == trimStr) {
                    $("label[for='" + elId + "']").css("background-color", "rgba(0,255,127, 0.2)");
                }
                else {
                    $("label[for='" + elId + "']").css("background-color", "rgba(255, 77, 71, 0.2)");
                }
                counter++;
            })
        })
    }
    CheckAnswears(checkAnswearsGrammar);
    CheckAnswears(checkAnswearsReading);
    CheckAnswears(checkAnswearsWriting);
</script>


